<!DOCTYPE html>
<html lang="en">
<head>
    <style type="text/css">
        html{scroll-behavior: smooth;}
        *{padding: 0;margin: 0;box-sizing: border-box;}
        body{font-family: Arial, Helvetica, sans-serif;font-size: 14px;padding:15px;}
        .datas{margin-bottom: 15px;width:100%;display: flex;flex-direction: column;border:1px solid black;}
        .datas > *{list-style: none;border:1px solid black;padding:250px 15px;width:100%;display: flex;flex-direction: column;}
        a{padding: 10px 15px;background: brown;color:white;text-decoration: none;}
    </style>
</head>
<body>
<main></main>

<script>
    (function(){
        var div = document.createElement("div");
        div.classList.add("datas");
        document.body.insertBefore(div, document.body.children[0]);

        var a = document.createElement("a");
        a.innerHTML = "View More";
        a.href = "#top";
        document.body.insertBefore(a, document.body.children[1]);

        const data = [
            {
                head: "1 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "2 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "3 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "4 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "5 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "6 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "7 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "8 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "9 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "10 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "11 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            },
            {
                head: "12 Lorem",
                text: "Lorem ipsum dolor <u>sit amit</u>"
            }
        ];

        var defaultShow = 5;
        var limit = 3;
        var emt = "";
        var element = document.querySelector(".datas");
        var link = document.querySelector("a");
        
        //var data = data;
        var totalData = data.length;
        console.log("totalData = " + totalData);
        
        if(totalData < limit){
            for(var i = 0; i < totalData; i++){
                emt += `
                    <data>
                        <p><b>${data[i].head}</b></p>
                        <p>${data[i].text}</p>
                    </data>
                `;
            }
            element.innerHTML = emt;
            link.remove();
            //alert(1);
        }
        else{
            for(var i = 0; i < defaultShow; i++){
                emt += `
                    <data>
                        <p><b>${data[i].head}</b></p>
                        <p>${data[i].text}</p>
                    </data>
                `;
            }
            element.innerHTML = emt;
            //alert(2);
            var dataShow = document.querySelectorAll(".datas > data").length;
            console.log("dataShow = " + dataShow);
            var rest = totalData - dataShow;
            console.log("rest = " + rest);

            //i -= 1;
            link.addEventListener("click", function(e){
                console.clear();

                document.querySelectorAll(".datas > data").forEach(function(f){
                    f.removeAttribute("id", "top");
                });

                if(rest < limit){
                    for(var j = i; j < i + rest; j++){
                        emt += `
                            <data>
                                <p><b>${data[j].head}</b></p>
                                <p>${data[j].text}</p>
                            </data>
                        `;
                    }
                    element.innerHTML = emt;
                    i += rest;
                    //alert(1);
                    var lirest = totalData - rest + 1;
                    document.querySelector(".datas > data:nth-child(" + lirest + ")").setAttribute("id", "top");
                }else{
                    for(var j = i; j < i + limit; j++){
                        emt += `
                            <data>
                                <p><b>${data[j].head}</b></p>
                                <p>${data[j].text}</p>
                            </data>
                        `;
                    }
                    element.innerHTML = emt;
                    i += limit;
                    //alert(2);
                    var li = dataShow + 1;
                    document.querySelector(".datas > data:nth-child(" + li + ")").setAttribute("id", "top");
                }

                var top = document.querySelector(".datas > data#top").offsetTop - 0;
                window.scrollTo(0, top);

                e.preventDefault();

                totalData = data.length;
                console.log("totalData = " + totalData);
                dataShow = document.querySelectorAll(".datas > data").length;
                console.log("dataShow = " + dataShow);
                rest = totalData - dataShow;
                console.log("rest = " + rest);

                li = dataShow - limit + 1;
                lirest = totalData - rest + 1;
                
                if(totalData === dataShow){
                    this.remove();
                }
            });            
        }
    })();
</script>
</body>
</html>