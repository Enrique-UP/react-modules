<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <style type="text/css">
    * {
      padding: 0;
      margin: 0;
      box-sizing: border-box;
    }

    body {
      font-family: Arial, Helvetica, sans-serif;
    }

    .box {
      width: 100%;
      display: flex;
      height: 5000px;
    }

    div, img {
      width: 100%;
      height:300px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      background: #ccc;
      justify-content: center;
      margin-bottom: 30px;
    }

    img[data-src]{background: url(../../../lazy-load/exp/loader.gif) no-repeat center center;}
    img[src]{background: none;}

    div{background-repeat: no-repeat;background-size: 100%;background-position: top center;}

    img.mb{margin-bottom: 0;}
  </style>
</head>

<body>
  <div class="box"></div>
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <div class="lazy" data-style="../../../banner1.jpg"></div>
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img class="lazy" data-src="../../../banner1.jpg" alt="Lorem" />
  <img data-src="../../../banner1.jpg" alt="Lorem" class="lazy mb" />
  <div class="box"></div>


  <script>
    function lazyLoadImage() {
      var scroll = document.documentElement.scrollTop;
      var windowBottom = scroll + window.innerHeight;      
      var lazy = document.querySelectorAll(".lazy");
      for(var i = 0; i < lazy.length; i++){
        var lazyBottom = lazy[i].offsetTop + lazy[i].offsetHeight;        

        if(scroll <= lazyBottom && lazy[i].offsetTop <= windowBottom){
          var dataSrc = lazy[i].getAttribute("data-src");
          var dataStyle = lazy[i].getAttribute("data-style");
          if(dataSrc){
            lazy[i].setAttribute("src", dataSrc);
            lazy[i].removeAttribute("data-src");
          }
          if(dataStyle){
            lazy[i].setAttribute("style", "background-image:url("+ dataStyle +")");
            lazy[i].removeAttribute("data-style");
          }
        }
      }
    }
    window.addEventListener("load", lazyLoadImage);
    window.addEventListener("scroll", lazyLoadImage);
    window.addEventListener("resize", lazyLoadImage);
  </script>
</body>

</html>